
ORG $1000

LDA #SIDE1
STA SIDE1
LDA #SIDE2
STA SIDE2
LDA #SIDE3
STA SIDE3

LDA SIDE1
CLC
ADC SIDE2
ADC SIDE3
SEC
SBC SIDE1
SBC SIDE2
SBC SIDE3
STA SEMIPERIMETER

LDA SIDE1
SEC
SBC SIDE2
SBC SIDE3
STA TEMP

LDA SIDE2
SEC
SBC SIDE1
SBC SIDE3
STA TEMP1

LDA SIDE3
SEC
SBC SIDE1
SBC SIDE2
STA TEMP2

LDA TEMP
ADC SIDE1
STA TEMP

LDA SEMIPERIMETER
SEC
SBC SIDE1
SBC SIDE2
SBC SIDE3
STA SEMIPERIMETER

LDA SEMIPERIMETER
CLC
ADC TEMP
ADC TEMP1
ADC TEMP2
JSR SQRT

BMI ERROR

STA AREA

ERROR: NOP

DONE: JMP DONE

SIDE1: .BYTE 5
SIDE2: .BYTE 12
SIDE3: .BYTE 13
SEMIPERIMETER: .BYTE 0
TEMP: .BYTE 0
TEMP1: .BYTE 0
TEMP2: .BYTE 0
AREA: .BYTE 0

SQRT: LDA #0
STA FRAC
LDA #8
STA SHIFT
LDA #0
STA DELTA
LDA #64
STA TEMP

DP1: LDX DELTA
CP1: LDX DELTA
ORA #1
STA DELTA
LSR
BCS DP1
CP2: LDX SHIFT
LSR
BCS CP1
ASL
ASL
STA SHIFT
ASL
ASL
CMP SHIFT
BCS CP2
LSR
LSR
ROL DELTA
ROL DELTA
BEQ SQRTDONE
DEC TEMP
JMP DP1

SQRTDONE: LDA FRAC
RTS

END
