
LDA #ARRAY_SIZE
STA COUNT

LDA #0
STA MAX_LEN

LDA #0
STA CUR_LEN

LDA #0
STA CUR_START

LDA #0
STA MAX_START

LOOP LDA CUR_LEN
    CMP MAX_LEN
    BCC UPDATE_MAX

    LDA CUR_START
    STA MAX_START

UPDATE_MAX LDA CUR_START
    STA MAX_START

    LDA CUR_LEN
    STA MAX_LEN

    DEC COUNT

    LDA COUNT
    BEQ END

    LDX COUNT
    LDA ARR, X
    STA CUR_ELEM

    LDX COUNT
FIND_INC LDA ARR, X
         CMP CUR_ELEM
         BCC INC_FOUND
         DEC COUNT
         BEQ END

         DEX
         BPL FIND_INC

INC_FOUND INC CUR_LEN
          BNE FIND_INC

END LDA MAX_LEN
    STA RESULT

    RTS

ARRAY_SIZE .BYTE 10
CUR_ELEM .BYTE 0
CUR_START .BYTE 0
CUR_LEN .BYTE 0
MAX_START .BYTE 0
MAX_LEN .BYTE 0
RESULT .BYTE 0

ARR .BYTE 5, 2, 8, 6, 3, 7, 9, 10, 4, 1

START
    JSR LOOP

    LDA RESULT
    ; Store or use the result here

    BRK
