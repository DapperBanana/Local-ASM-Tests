
LCS_START:
    LDX #STRING1_SIZE
    LDY #STRING2_SIZE
    JSR LCS
    RTS

LCS:
    CLC
    LDA #0
    STA RESULT
    STA INDEX1
    STA INDEX2

LCS_LOOP:
    CMP INDEX1, X
    BEQ LCS_DONE
    CMP INDEX2, Y
    BEQ LCS_DONE
    
    LDA STRING1, X
    CMP STRING2, Y
    BEQ LCS_MATCH
    
LCS_MISS:
    DEC X
    DEC Y
    JMP LCS_LOOP

LCS_MATCH:
    LDA INDEX1
    INX
    STA INDEX1
    LDA INDEX2
    INY
    STA INDEX2
    INC RESULT
    JMP LCS_LOOP

LCS_DONE:
    RTS

STRING1: .BYTE "ABCDEF", 0
STRING1_SIZE: .BYTE 6
STRING2: .BYTE "ACF", 0
STRING2_SIZE: .BYTE 3
RESULT: .BYTE 0
INDEX1: .BYTE 0
INDEX2: .BYTE 0
